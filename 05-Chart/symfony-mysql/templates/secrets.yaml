---
# -------------------- SECRETS --------------------
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-secrets
type: Opaque
data:
  app-secret: {{ .Values.secrets.appSecret | b64enc | quote }}
  db-password: {{ .Values.secrets.databasePassword | b64enc | quote }}
  db-user: {{ .Values.secrets.databaseUsername | b64enc | quote }}
  db-name: {{ .Values.secrets.databaseName | b64enc | quote }}
  # Construction de l'URL
  database-url: {{ printf "mysql://%s:%s@%s-mysql:3306/%s" .Values.secrets.databaseUsername .Values.secrets.databasePassword .Release.Name .Values.secrets.databaseName | b64enc | quote }}